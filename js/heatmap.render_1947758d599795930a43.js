!function(t){function e(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return t[a].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};e.m=t,e.c=i,e.p="http://localhost:3456/static/",e(0)}([function(t,e,i){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}var n,r,s,o,h,d=i(2),l=a(d),u=i(7),c=a(u),f=i(6),_=a(f),g=!1,m={},x={},p=function(t,e){var i=window,a=i.scrollX,r=i.scrollY,s=n.getContext("2d");v(),t.x!==e.x&&t.y!==e.y&&s.clearRect(t.x+a,t.y+r,e.x-t.x,e.y-t.y)},v=function(){y();var t=n.getContext("2d");t.fillStyle="rgba(0, 0, 0, 0.35)",t.fillRect(0,0,n.width,n.height)},y=function(){n.getContext("2d").clearRect(0,0,n.width,n.height)},w=function(t){h=t;var e=t.data,i=window.innerWidth,a=window.innerHeight,d=window.document.body,u=window.document.body.getBoundingClientRect(),f=u.height,_=d.style.height;f>32760&&(d.style.height="32760px"),o=l.default.getPxList(e,i,a),s&&s._renderer.canvas.getBoundingClientRect().height===u.height?(s.setData({data:o.flow,max:o.max,min:0}),s._renderer.canvas.style.display="block"):(s&&(d.removeChild(s._renderer.canvas),s=null),s=c.default.create({container:d}),1!==t.showType&&2!==t.showType||(s.setData({data:o.flow,max:o.max,min:0}),s._renderer.canvas.style["z-index"]="99999",s._renderer.canvas.setAttribute("name","page"))),r&&r._renderer.canvas.getBoundingClientRect().height===u.height?(r.setData({data:o.fix,max:o.max,min:0}),r._renderer.canvas.style.display="block"):(r&&(d.removeChild(r._renderer.canvas),r=null),r=c.default.create({container:d}),r.setData({data:o.fix,max:o.max,min:0}),1!==t.showType&&3!==t.showType||(r._renderer.canvas.style.position="fixed",r._renderer.canvas.style["z-index"]="99999",r._renderer.canvas.setAttribute("name","pop"))),f>32760&&(d.style.height=_),n&&(d.removeChild(n),n=null),n=document.createElement("canvas"),n.width=u.width,n.height=Math.min(u.height,32760),n.style.width=u.width,n.style.height=Math.min(u.height,32760),n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["z-index"]="99999",v(),d.appendChild(n),n.onmousedown=function(t){1===(t.which||t.button)&&(g=!0,m.x=t.clientX,m.y=t.clientY,x.x=t.clientX,x.y=t.clientY,p(m,x))},n.onmousemove=function(t){g&&(x.x=t.clientX,x.y=t.clientY,p(m,x))},n.onmouseup=function(t){var e=window,i=e.scrollX,a=e.scrollY,n=void 0;m.x>x.x&&(n=m,m=x,x=n,n=null);var r=m.x+i,s=m.y+a,h=x.x+i,d=x.y+a;if(g=!1,h-r<10&&d-s<10)return void window.top.postMessage(JSON.stringify({type:"unselect"}),"*");var l=[];o.flow&&o.flow.length>0&&o.flow.forEach(function(t){t.x>=r&&t.x<=h&&t.y>=s&&t.y<=d&&l.push(t)}),o.fix&&o.fix.length>0&&o.fix.forEach(function(t){t.x>=m.x&&t.x<=x.x&&t.y>=m.y&&t.y<=x.y&&l.push(t)}),m={},x={},window.top.postMessage(JSON.stringify({type:"select",data:l}),"*")}},D=function(t){n&&(n.style.display="none"),r&&(r._renderer.canvas.style.display="none"),s&&(s._renderer.canvas.style.display="none")},C=function(){n&&y()},b=function(t){var e=void 0;try{e=JSON.parse(t.data)}catch(t){}if(e){var i=e,a=i.type;"clean"===a?D():"unselect"===a?C():"render"===a&&w(e)}};window.addEventListener("message",b,!1),window.addEventListener("scroll",(0,_.default)(function(){if(n){var t=window.document.body.getBoundingClientRect();n.getBoundingClientRect().height!==t.height&&w(h)}},300),!1),window.top!==window&&window.top.postMessage(JSON.stringify({type:"load"}),"*")},function(t,e){"use strict";t.exports={xmetres:20,ymetres:80,fm:"hot_click"}},function(t,e,i){"use strict";var a=i(1),n=function(t){return t&&t.__esModule?t:{default:t}}(a),r=function(t,e,i){return Math.ceil(t*i/e)},s=function(t,e,i){return parseInt((t-.5)/i*e)},o=function(t){return"fixed"===window.getComputedStyle(t).position},h={getCountPosition:function(t){var e=t.target,i=window.innerWidth,a=window.innerHeight;return h.checkInFixDom(e)?{x:r(t.clientX,i,n.default.xmetres),y:r(t.clientY,a,n.default.ymetres)}:{x:r(t.clientX,i,n.default.xmetres),y:r(t.clientY+window.scrollY,i,n.default.xmetres)}},getFlowPx:function(t,e){return t.x=s(t.loc_x,e,n.default.xmetres),t.y=s(t.loc_y,e,n.default.xmetres),t},getFixPx:function(t,e,i){return t.x=s(t.loc_x,e,n.default.xmetres),t.y=s(t.loc_y,i,n.default.ymetres),t},getPxList:function(t,e,i){var a={flow:[],fix:[]},n=0;return t.forEach(function(t){t.click_pv>n&&(n=t.click_pv)}),0===n?a:(t.forEach(function(t){t.value=parseInt(t.click_pv/n*100),1*t.is_fix==0?a.flow.push(h.getFlowPx(t,e)):a.fix.push(h.getFixPx(t,e,i))}),a.max=100,a)},checkInFixDom:function(t){var e=0;if(o(t))e=1;else for(;t.parentElement;)if(t=t.parentElement,o(t)){e=1;break}return e}};t.exports=h},,,,function(t,e){t.exports=function(t,e,i){function a(){var d=Date.now()-o;d<e&&d>=0?n=setTimeout(a,e-d):(n=null,i||(h=t.apply(s,r),s=r=null))}var n,r,s,o,h;null==e&&(e=100);var d=function(){s=this,r=arguments,o=Date.now();var d=i&&!n;return n||(n=setTimeout(a,e)),d&&(h=t.apply(s,r),s=r=null),h};return d.clear=function(){n&&(clearTimeout(n),n=null)},d}},function(t,e,i){var a,n;!function(r,s,o){void 0!==t&&t.exports?t.exports=o():(a=o,void 0!==(n="function"==typeof a?a.call(e,i,e,t):a)&&(t.exports=n))}(0,0,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},e=function(){var e=function(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},i=t.defaultRadius;return e.prototype={_organiseData:function(t,e){var a=t[this._xField],n=t[this._yField],r=this._radi,s=this._data,o=this._max,h=this._min,d=t[this._valueField]||1,l=t.radius||this._cfgRadius||i;s[a]||(s[a]=[],r[a]=[]),s[a][n]?s[a][n]+=d:(s[a][n]=d,r[a][n]=l);var u=s[a][n];return u>o?(e?this.setDataMax(u):this._max=u,!1):u<h?(e?this.setDataMin(u):this._min=u,!1):{x:a,y:n,value:d,radius:l,min:h,max:o}},_unOrganizeData:function(){var t=[],e=this._data,i=this._radi;for(var a in e)for(var n in e[a])t.push({x:a,y:n,radius:i[a][n],value:e[a][n]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var t=arguments[0],e=t.length;e--;)this.addData.call(this,t[e]);else{var i=this._organiseData(arguments[0],!0);i&&(0===this._data.length&&(this._min=this._max=i.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[i]}))}return this},setData:function(t){var e=t.data,i=e.length;this._data=[],this._radi=[];for(var a=0;a<i;a++)this._organiseData(e[a],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},e}(),i=function(){function t(t){var i=t.container,a=this.shadowCanvas=document.createElement("canvas"),n=this.canvas=t.canvas||document.createElement("canvas"),r=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});n.className="heatmap-canvas",this._width=n.width=a.width=t.width||+r.width.replace(/px/,""),this._height=n.height=a.height=t.height||+r.height.replace(/px/,""),this.shadowCtx=a.getContext("2d"),this.ctx=n.getContext("2d"),n.style.cssText=a.style.cssText="position:absolute;left:0;top:0;",i.style.position="relative",i.appendChild(n),this._palette=e(t),this._templates={},this._setStyles(t)}var e=function(t){var e=t.gradient||t.defaultGradient,i=document.createElement("canvas"),a=i.getContext("2d");i.width=256,i.height=1;var n=a.createLinearGradient(0,0,256,1);for(var r in e)n.addColorStop(r,e[r]);return a.fillStyle=n,a.fillRect(0,0,256,1),a.getImageData(0,0,256,1).data},i=function(t,e){var i=document.createElement("canvas"),a=i.getContext("2d"),n=t,r=t;if(i.width=i.height=2*t,1==e)a.beginPath(),a.arc(n,r,t,0,2*Math.PI,!1),a.fillStyle="rgba(0,0,0,1)",a.fill();else{var s=a.createRadialGradient(n,r,t*e,n,r,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),a.fillStyle=s,a.fillRect(0,0,2*t,2*t)}return i},a=function(t){for(var e=[],i=t.min,a=t.max,n=t.radi,t=t.data,r=Object.keys(t),s=r.length;s--;)for(var o=r[s],h=Object.keys(t[o]),d=h.length;d--;){var l=h[d],u=t[o][l],c=n[o][l];e.push({x:o,y:l,value:u,radius:c})}return{min:i,max:a,data:e}};return t.prototype={renderPartial:function(t){t.data.length>0&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),t.data.length>0&&(this._drawAlpha(a(t)),this._colorize())},_updateGradient:function(t){this._palette=e(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e=this._min=t.min,a=this._max=t.max,t=t.data||[],n=t.length,r=1-this._blur;n--;){var s,o=t[n],h=o.x,d=o.y,l=o.radius,u=Math.min(o.value,a),c=h-l,f=d-l,_=this.shadowCtx;this._templates[l]?s=this._templates[l]:this._templates[l]=s=i(l,r);var g=(u-e)/(a-e);_.globalAlpha=g<.01?.01:g,_.drawImage(s,c,f),c<this._renderBoundaries[0]&&(this._renderBoundaries[0]=c),f<this._renderBoundaries[1]&&(this._renderBoundaries[1]=f),c+2*l>this._renderBoundaries[2]&&(this._renderBoundaries[2]=c+2*l),f+2*l>this._renderBoundaries[3]&&(this._renderBoundaries[3]=f+2*l)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],i=this._renderBoundaries[2]-t,a=this._renderBoundaries[3]-e,n=this._width,r=this._height,s=this._opacity,o=this._maxOpacity,h=this._minOpacity,d=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),t+i>n&&(i=n-t),e+a>r&&(a=r-e);for(var l=this.shadowCtx.getImageData(t,e,i,a),u=l.data,c=u.length,f=this._palette,_=3;_<c;_+=4){var g=u[_],m=4*g;if(m){var x;x=s>0?s:g<o?g<h?h:g:o,u[_-3]=f[m],u[_-2]=f[m+1],u[_-1]=f[m+2],u[_]=d?f[m+3]:x}}l.data=u,this.ctx.putImageData(l,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx,i=e.getImageData(t.x,t.y,1,1),a=i.data[3],n=this._max,r=this._min;return Math.abs(n-r)*(a/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},t}(),a=function(){var e=!1;return"canvas2d"===t.defaultRenderer&&(e=i),e}(),n={merge:function(){for(var t={},e=arguments.length,i=0;i<e;i++){var a=arguments[i];for(var n in a)t[n]=a[n]}return t}},r=function(){function i(){var i=this._config=n.merge(t,arguments[0]||{});if(this._coordinator=new r,i.plugin){var o=i.plugin;if(!t.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var h=t.plugins[o];this._renderer=new h.renderer(i),this._store=new h.store(i)}else this._renderer=new a(i),this._store=new e(i);s(this)}var r=function(){function t(){this.cStore={}}return t.prototype={on:function(t,e,i){var a=this.cStore;a[t]||(a[t]=[]),a[t].push(function(t){return e.call(i,t)})},emit:function(t,e){var i=this.cStore;if(i[t])for(var a=i[t].length,n=0;n<a;n++){var r=i[t][n];r(e)}}},t}(),s=function(t){var e=t._renderer,i=t._coordinator,a=t._store;i.on("renderpartial",e.renderPartial,e),i.on("renderall",e.renderAll,e),i.on("extremachange",function(e){t._config.onExtremaChange&&t._config.onExtremaChange({min:e.min,max:e.max,gradient:t._config.gradient||t._config.defaultGradient})}),a.setCoordinator(i)};return i.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=n.merge(this._config,t),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},i}();return{create:function(t){return new r(t)},register:function(e,i){t.plugins[e]=i}}})}]);